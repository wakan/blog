box: debian  
build:
  steps:
    - script:
        name: install git
        code: |
            apt-get update
            apt-get install git -y
    - add-to-known_hosts:
        hostname: github.com
        fingerprint: nThbg6kXUpJWGl7E1IGOCspRomTxdCARLviKw6E5SY8
        type: rsa
    - add-ssh-key:
        keyname: WERCKER_BLOG
    - script:
        name: initialize git submodules
        code: |
            git submodule update --init --recursive
    - arjen/hugo-build: 
        flags: --buildDrafts=false
        version: "0.85.0"
deploy:
  steps:
    - install-packages:
        packages: git
    - add-to-known_hosts:
        hostname: github.com
        fingerprint: nThbg6kXUpJWGl7E1IGOCspRomTxdCARLviKw6E5SY8
        type: rsa
    - add-ssh-key:
        keyname: WERCKER_BLOG
    - script:
        name: push to gh-pages
        code: |
          cd public
          rm -rf .git
          git init
          git config --global user.email "wercker@yopmail.com"
          git config --global user.name "wercker"
          git add .
          git commit -m "deploy from wercker"
          git push -f git@github.com:wakan/blog.git master:gh-pages
